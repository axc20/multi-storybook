import { Meta } from '@storybook/addon-docs';

<Meta title="typescript/utility types" />

# Utility Types

```ts
// Partial<Type>
// takes a type and converts all its proprties to optional
interface Sticker {
  id: number;
  name: string;
  createdAt: string;
  updatedAt: string;
  submitter: undefined | string;
}

type StickerUpdateParam = Partial<Sticker>;

// Readonly<Type>
// takes an object and makes its properties read-only
type StickerFromAPI = Readonly<Sticker>;

// Record<KeysFrom, Type>
// creates a type which uses the list of properties from
// KeysFrom and gives them the value of Type
type NavigationPages = 'home' | 'stickers' | 'about' | 'contact';

interface PageInfo {
  title: string;
  url: string;
  axTitle?: string;
}

const navigationInfo: Record<NavigationPages, PageInfo> = {
  home: { title: 'Home', url: '/' },
  about: { title: 'About', url: '/about' },
  contact: { title: 'Contact', url: '/contact' },
  stickers: { title: 'Stickers', url: '/stickers/all' }
};

// Pick<Type, Keys>
// creates a type by picking the set of properties
// Keys from Type
type StickerSortPreview = Pick<Sticker, 'name' | 'updatedAt'>;

// Omit<Type, Keys>
// creates a type by removing the set of properties
// Keys from Type
type StickerTimeMetadata = Omit<Sticker, 'name'>;

// Exclude<Type, RemoveUnion>
// creates a type consisting of any property in Type's
// properties which don't overlap with RemoveUnion
type HomeNavigationProps = Exclude<NavigationPages, 'home'>;

// Extract<Type, MatchUnion>
// creates a type where any property in Type's properties
// are included if they overlap with MatchUnion
type DynamicPages = Extract<NavigationPages, 'home' | 'stickers'>;

// NonNullable<Type>
// creates a type by excluding null and undefined from a
// set of properties, useful when you have validation check
type StickerLookupResult = Sticker | undefined | null;
type ValidatedResult = NonNullable<StickerLookupResult>;

// ReturnType<Type>
// extracts the return value from a Type
declare function getStickerByID(id: number): Promise<StickerLookupResult>;
type StickerResponse = ReturnType<typeof getStickerByID>;

// InstanceType<Type>
// creates a type which is an instance of a class, or object
// with a constructor function
class StickerCollection {
  stickers: Sticker[];
}
type CollectionItem = InstanceType<typeof StickerCollection>;

// Required<Type>
// creates a type which converts all optional properties to required
type AccessiblePageInfo = Required<PageInfo>;

// ThisType<Type>
// does not return a new type but instead manipulates the defintion
// of this inside a function
// can only use ThisType when `noImplicitThis` is on in tsconfig
```
